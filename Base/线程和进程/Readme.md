
# 进程和线程


### 线程定义

线程是进程的基本执行单元,一个进程的所有任务都是在线程中执行,
进程至少有一条线程
程序启动会默认开始一条线程,这条线程被称为主线程或UI线程

### 进程定义

进程是指在系统中正在运行的一个应用程序
每个进程之间是独立的,
每个进程均运行在其专用的且受保护的内存中

进程与线程的区别:

- 调度：线程作为CPU调度和分配的基本单位，进程作为分配资源的基本单位
- 并发性：进程之间可以并发，线程之间也可以并发
- 资源拥有：进程是拥有资源的基本单位，线程不拥有资源，但是可以访问隶属于进程内的资源
- 系统开销：在创建和销毁进程时，系统都需要为之分配和回收资源，导致系统的开销明显大于创建和撤销线程的开销
- 一个进程崩溃后,在保护模式下不会对其他进程产生影响,但是一个线程崩溃整个进程都死掉.所以多进程要比多线程健壮.

# 谈谈对多线程开发的理解。iOS 多线程

### 优点：

- 能适当提高程序的执行效率
- 能适当提高资源利用率（CPU、内存利用率）能适当提高效率，比如在一些等待的任务实现上如用户输入、文件读写和网络收发数据等,线程就比较有用了。

### 缺点：

- 创建线程会消耗内存资源，创建一条线程大约需要90毫秒；创建线程太多会降低程序性能，大量消耗CPU
- 线程越多，CPU在调度线程上的开销就越大
- 线程的中止需要考虑其对程序运行的影响。
- 程序设计更加复杂：比如线程之间的通信、多线程的数据共享,共享数据时需要防止线程死锁情况的发生。

### OS中实现多线程的几种方案，各自有什么特点？

![iOS多线程](https://upload-images.jianshu.io/upload_images/1846524-cf7b835865f8c5f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

NSThread 面向对象的，需要程序员手动创建线程，但不需要手动销毁。子线程间通信很难。

GCD c语言，充分利用了设备的多核，自动管理线程生命周期。比NSOperation效率更高。

NSOperation 基于gcd封装，更加面向对象，比gcd多了一些功能。

### 多线程的 `并行` 和 `并发` 有什么区别？

并行：并行是指多个处理器或者是多核的处理器同时处理多个不同的任务。 
并发：并发是指一个处理器同时处理多个任务。在线程间通过快速切换，让人感觉在同步进行

### 多线程的 `同步` 和 `异步` 有什么区别？

同步：只能在当前线程中执行任务，不具备开启新线程的能力
异步：可以在新的线程中执行任务，具备开启新线程的能力

### 队列的 `串行` 和 `并发` 有什么区别？

并发队列（ConcurrentDispatch Queue）
可以让多个任务并发（同时）执行（自动开启多个线程同时执行任务）
并发功能只有在异步（dispatch_async）函数下才有效

串行队列（SerialDispatch Queue）
让任务一个接着一个地执行（一个任务执行完毕后，再执行下一个任务）


![同步和异步]
(https://upload-images.jianshu.io/upload_images/1846524-6918dda9d7573cf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
