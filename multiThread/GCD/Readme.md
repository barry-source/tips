
# GCD

## 1. GCD 简介

    Grand Central Dispatch（GCD） 是 Apple 开发的一个多核编程的较新的解决方法。它主要用于优化应用程序以支持多核处理器以及其他对称多处理系统。它是一个在线程池模式的基础上执行的并发任务。在 Mac OS X 10.6 雪豹中首次推出，也可在 iOS 4 及以上版本使用。

### 1.1、 GCD优势：

GCD 可用于多核的并行运算；
GCD 会自动利用更多的 CPU 内核（比如双核、四核）；
GCD 会自动管理线程的生命周期（创建线程、调度任务、销毁线程）；
程序员只需要告诉 GCD 想要执行什么任务，不需要编写任何线程管理代码。
GCD 拥有以上这么多的好处，而且在多线程中处于举足轻重的地位。那么我们就很有必要系统地学习一下 GCD 的使用方法。

### 1.2、GCD 任务和队列


- 『任务』：就是执行操作的意思，换句话说就是你在线程中执行的那段代码。在 GCD 中是放在 block 中的。执行任务有两种方式， 
    两者的主要区别是：是否等待队列的任务执行结束
    - 『同步任务』：同步添加任务到指定的队列中，在添加的任务执行结束之前，会一直等待，直到队列里面的任务完成之后再继续执行。
    - 『异步任务』：如果队列支持开多个线程，那么它会在其它线程中执行任务，不用等待当前线程执行结束

- 『队列』: 这里的队列指执行任务的等待队列，即用来存放任务的队列。队列是一种特殊的线性表，采用 FIFO（先进先出）的原则，即新任务总是被插入到队列的末尾，而读取任务的时候总是从队列的头部开始读取。每读取一个任务，则从队列中释放一个
    
    - 『串行队列』：每次只有一个任务被执行。让任务一个接着一个地执行。（只开启一个线程，一个任务执行完毕后，再执行下一个任务）
    - 『并发队列』：可以让多个任务并发（同时）执行。（可以开启多个线程，并且同时执行任务）


`任务`和`队列`的关系：
`任务`指的是需不需要开启线程
`队列`指的是有没有开启多线程的能力

### 1.3、队列和任务的组合情况

| 区别 | 并发队列| 串行队列| 主队列| 
| ------ | ------ | ------ |
| 同步（sync）  |    没有开启新线程，串行执行任务   |   没有开启新线程，串行执行任务    |  死锁卡住不执行
| 异步（async） |     有开启新线程，并发执行任务     | 有开启新线程（1条），串行执行任务     |  没有开启新线程，串行执行任务

## 2. GCD 使用

